# Server
NODE_ENV=development
PORT=8045

# Deployment Environment (controls AI availability)
# - development: AI enabled (if OPENAI_API_KEY set)
# - staging: AI enabled (if OPENAI_API_KEY set)
# - production: AI ALWAYS disabled
# For local dev, leave unset (defaults to NODE_ENV)
# DEPLOY_ENV=development
# CORS: Comma-separated list of allowed origins for cross-origin requests
# In dev, include all local ports you use for the web app
ALLOWED_ORIGINS=http://localhost:3045,http://localhost:3500

# Database
DATABASE_URL=postgresql://postgres:postgres@localhost:5678/elder_first

# Database SSL Configuration (SECURITY FIX H8/H9)
# Options:
# - 'false' or unset: No SSL (development only - local Docker)
# - 'true': SSL with certificate validation (REQUIRED for production)
# - 'require-no-verify': SSL without cert validation (Azure-managed certs only)
#
# For production: Set DATABASE_SSL=true
# For local development with Docker: Set DATABASE_SSL=false
DATABASE_SSL=false

# Azure
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=

# Authentication (SECURITY FIX C3)
# MUST match web app NEXTAUTH_SECRET
# For production/staging: REQUIRED, must be at least 32 characters
# For development: Optional, if not set a random secret is generated (tokens invalid after restart)
# Generate a secure secret: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
NEXTAUTH_SECRET=
# Alternative: JWT_SECRET (if you want to use a different secret for API tokens)
# JWT_SECRET=

# Logging
LOG_LEVEL=debug

# Rate Limiting (SECURITY FIX C4)
# Time window in milliseconds (default: 15 minutes = 900000)
# RATE_LIMIT_WINDOW_MS=900000
# Max requests per window for general endpoints (default: 100)
# RATE_LIMIT_MAX_REQUESTS=100
# Max requests per window for auth endpoints (default: 10)
# AUTH_RATE_LIMIT_MAX_REQUESTS=10

# AI / OpenAI
# API key is now stored encrypted in database via Settings â†’ AI
# Generate encryption key: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
APP_ENCRYPTION_KEY=
# OPENAI_API_KEY is deprecated - use the Settings UI instead
